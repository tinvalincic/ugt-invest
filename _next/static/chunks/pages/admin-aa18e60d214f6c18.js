(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{9162:function(e,n,t){"use strict";t.d(n,{M:function(){return i}});var r=t(7294),a=t(4682);function i(){var e=(0,r.useState)(0),n=e[0],t=e[1];return(0,r.useEffect)(function(){(0,a.ol)(function(){return t(n+1)})},[]),[n,t]}},2650:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(9499),a=t(6835),i=t(29),s=t(7794),o=t.n(s),u=t(4682),c=t(7294),l=t(6188),d=t.n(l),m=t(9162),p=t(5893),f=function(){var e=(0,c.useState)(!1),n=e[0],t=e[1],r=(0,c.useState)(!1),a=r[0],i=r[1];return(0,c.useEffect)(function(){(0,u.R3)(function(e){i(!0),t(e)})},[]),{loggedIn:n,initialized:a}};function _(){var e=f(),n=e.loggedIn;return e.initialized?n?(0,p.jsx)(v,{}):(0,p.jsx)(h,{}):null}var h=function(){var e,n=(0,c.useState)(""),t=n[0],r=n[1],a=(0,c.useState)(""),s=a[0],l=a[1],m=(0,c.useState)(null),f=m[0],_=m[1],h=(0,c.useState)(!1),v=h[0],g=h[1],j=(e=(0,i.Z)(o().mark(function e(n){var r,a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),g(!0),e.prev=2,e.next=5,fetch("https://ugt-invest.hr/login.php",{method:"POST",body:JSON.stringify({user:t,password:s}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 5:if((r=e.sent).ok){e.next=8;break}throw Error("Nešto je pošlo po krivu.");case 8:return e.next=10,r.json();case 10:(a=e.sent).success?(localStorage.setItem("sessionId",a.user.sessionId),window.location.reload()):_(u.tL[a.error]),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),_(e.t0.message);case 17:return e.prev=17,g(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[2,14,17,20]])})),function(n){return e.apply(this,arguments)});return(0,p.jsxs)("div",{className:d().wrap,children:[(0,p.jsx)("h1",{className:d().title,children:"Prijava"}),(0,p.jsxs)("form",{onSubmit:j,className:d().loginForm,children:[(0,p.jsx)("input",{type:"text",value:t,onChange:function(e){return r(e.target.value)},placeholder:"Username",required:!0}),(0,p.jsx)("input",{type:"password",value:s,onChange:function(e){return l(e.target.value)},placeholder:"Password",required:!0}),(0,p.jsx)("button",{type:"submit",disabled:v,children:v?"Loading...":"Login"}),f&&(0,p.jsx)("div",{className:d().errorMessage,children:f})]})]})},v=function(){var e=(0,m.M)(),n=(0,a.Z)(e,2),t=n[0],i=n[1],s=(0,u.wc)(),o=function(e,n,t){s[e][n]!==t&&(0,u.Ge)(e,n,function(){i(function(e){return e+1})})};return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:d().header,children:(0,p.jsx)("button",{className:d().logoutButton,onClick:function(){localStorage.removeItem("sessionId"),window.location.reload()},children:"Odjava"})}),Object.entries(s).map(function(e){var n=(0,a.Z)(e,2),t=n[0],i=n[1];return(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{className:d().buildingTitle,children:u.Gm[t]}),(0,p.jsx)("div",{className:d().apartmentsList,children:Object.keys(i).map(function(e){return(0,p.jsxs)("div",{className:d().apartmentItem,children:[(0,p.jsxs)("span",{children:["S-",e]}),(0,p.jsx)("button",{className:(0,u.dh)(d().apartmentButton,(0,r.Z)({},d().active,!(0,u.Dn)(t,e))),onClick:function(){return o(t,e,"0")},children:"Dostupno"}),(0,p.jsx)("button",{className:(0,u.dh)(d().apartmentButton,(0,r.Z)({},d().active,(0,u.Dn)(t,e))),onClick:function(){return o(t,e,"1")},children:"Prodano"})]},e)})})]},t)})]},t)}},8195:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(2650)}])},6188:function(e){e.exports={wrap:"admin_wrap__8eFjn",loginForm:"admin_loginForm__ULmXT",title:"admin_title__5gTtM",errorMessage:"admin_errorMessage__PdT2X",header:"admin_header__1s0Hb",logoutButton:"admin_logoutButton__ohBk5",apartmentItem:"admin_apartmentItem__Z2_ie",buildingTitle:"admin_buildingTitle__vuPrf",apartmentButton:"admin_apartmentButton__51I2d",active:"admin_active__8cj2R"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8195)}),_N_E=e.O()}]);